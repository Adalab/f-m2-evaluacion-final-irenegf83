"use strict";const inputEl=document.querySelector("#form-search__input"),buttonEl=document.querySelector(".form-search__button"),favoriteSeriesEl=document.querySelector(".series__favorites"),listSeriesEl=document.querySelector(".series__search"),apiUrl="http://api.tvmaze.com/search/shows?q=",imageDefault="https://via.placeholder.com/210x295/ffffff/666666/?text=TV",favoriteArr=[];function queryApi(){const e=inputEl.value;fetch(apiUrl+e).then(e=>e.json()).then(e=>{for(const t of e){const{show:e}=t,a=e.name,i=e.image;paintSeries(a,null===i?imageDefault:i.medium)}}).catch(e=>console.log(`Tienes un error por aquí: ${e}`))}const createElement=e=>document.createElement(e),selectedFavoriteSerie=e=>e.classList.toggle("favorite");function savedArrayFavorites(e,t){const a={name:e,image:t};favoriteArr.push(a),paintFavorites(e,t)}const savedLocalStorage=e=>localStorage.setItem("favoriteArr",JSON.stringify(e)),savedFavSeries=JSON.parse(localStorage.getItem("favoriteArr"));function paintFavorites(e,t){const a=createElement("li");a.classList.add("favorites");const i=createElement("h4");i.classList.add("favorites__title");const r=document.createTextNode(e);i.appendChild(r);const n=createElement("img");n.classList.add("favorites__image"),n.setAttribute("src",t),a.appendChild(n),a.appendChild(i),favoriteSeriesEl.appendChild(a)}function paintSeries(e,t){const a=createElement("li"),i=createElement("h2"),r=document.createTextNode(e);i.appendChild(r);const n=createElement("img");n.setAttribute("src",t),a.appendChild(n),a.appendChild(i),listSeriesEl.appendChild(a),a.addEventListener("click",function(){selectedFavoriteSerie(a)}),a.addEventListener("click",function(){savedArrayFavorites(e,t)}),a.addEventListener("click",function(){savedLocalStorage(favoriteArr)})}function reloadPage(){if(savedFavSeries){console.log("la caché tiene cosicas");for(const e of savedFavSeries)paintFavorites(e.name,e.image)}else console.log("la caché está vacía")}function handleButtonClick(e){e.preventDefault(),listSeriesEl.innerHTML="",queryApi()}reloadPage(),buttonEl.addEventListener("click",handleButtonClick);